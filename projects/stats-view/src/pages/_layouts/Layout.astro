---
import { tv } from "tailwind-variants";
import "../../global.css";
import themeInitScript from "../../scripts/theme-init.js?raw";
import ThemeToggle from "./_components/ThemeToggle.astro";

export interface Props {
  title: string;
}

const { title } = Astro.props;

const { body, main } = tv({
  slots: {
    body: [
      "bg-[size:10px_10px] bg-[image:repeating-linear-gradient(315deg,_var(--pattern-fg)_0,_var(--pattern-fg)_1px,_transparent_0,_transparent_50%)]",
      "dark:bg-gray-950",
    ],
    main: [
      "bg-white dark:bg-gray-900",
      "text-gray-800 dark:text-white",
      "border-l border-r border-gray-200 dark:border-gray-700",
      "mx-auto max-w-xl md:max-w-3xl lg:max-w-6xl",
      "p-6 lg:p-8",
      "font-sans leading-relaxed",
      "transition-colors duration-300",
      "min-h-screen",
    ],
  },
})();
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <!-- 
      FOUC (Flash of Unstyled Content) Prevention:
      - The script must execute immediately before any CSS to prevent theme flashing
      - is:inline directive is required to ensure immediate execution without bundling delays
      cf. https://docs.astro.build/en/reference/directives-reference/#isinline
    -->
    <script is:inline set:html={themeInitScript} />
  </head>
  <body class={body()}>
    <ThemeToggle />
    <main class={main()}>
      <slot />
    </main>
  </body>
</html>
